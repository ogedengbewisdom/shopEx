@if(state$ | async; as state) {
@if(state.loading) {
<app-loader />
}
@else if(state.error) {
<app-display-error [error]="state.error" [statusCode]="state.statusCode" />
} @else if(state.product) {
<div class="product-detail-container">

    <div class="product-detail-image-container">
        <img [src]="state.product.imageUrl" [alt]="state.product.name" class="product-image">
    </div>
    <div class="product-detail-content">
        <h1 class="product-detail-title">{{ state.product.name }}</h1>
        <p class="product-detail-category">Category: {{ category || state.product.category }}</p>
        <p class="product-detail-description">{{ state.product.description }}</p>
        <p class="product-detail-price">Price: ${{ state.product.price }}</p>
        <p>{{ state.product.inStock ? 'In Stock' : 'Out of Stock' }}</p>
        <p>Rating: {{ state.product.rating }}</p>
        <div class="product-detail-button-container">
            <app-button-component [buttonText]="'Add to Cart'" (buttonClick)="addToCart(state.product)" />
            @if(isInCart(state.product.id) | async) {
            <app-button-component [buttonText]="'Remove from Cart'" (buttonClick)="removeFromCart(state.product.id)" />
            }

        </div>

    </div>


</div>
}
}